import{w as m,O as F,k as $,aW as b,aX as k,H as p,F as v,I as u,J as y,aY as P,t as s}from"./chunk-BBVasXg9.js";import"./chunk-Dc9HkZTO.js";import{i as M}from"./chunk-DGI3hcLu.js";var C=Array.isArray;const d=m({sid:"-iugphm",fn:()=>F({effect:$(()=>({url:"/surveys/questions"}))}),name:"getQuestionsQuery",method:"createQuery"}),x=m({sid:"-ee19bn",fn:()=>b({effect:k(n=>({url:"/surveys/answers/submit",method:p.POST,body:n}))}),name:"submitAnswersMutation",method:"createMutation"}),A=v(()=>{const n=u(1,{name:"$currentPage",sid:"-ro4v45"}),g=u(0,{name:"$currentProgress",sid:"hhhl88"}),f=u(null,{name:"$currentQuestion",sid:"-nkasqq"}),c=u(null,{name:"$currentValue",sid:"-o0im1t"}),t=u({answers:[]},{name:"$scaleForm",sid:"sjuosy"}),i=y({name:"scaleFormFieldChanged",sid:"cmq463"}),l=y({name:"formPageChanged",sid:"-11v8w4"}),w=m({sid:"-gydwjl",fn:()=>P(i,250),name:"delayedFormFieldChanged",method:"delay"});return s({and:[{clock:[n,d.$data],source:{page:n,questions:d.$data},fn:({page:e,questions:r})=>r?r[e-1]:null,target:f}],or:{sid:"sjbbmu"}}),s({and:[{clock:i,source:t,fn:(e,r)=>(e.answers[r.index]=r,{...e}),target:t}],or:{sid:"t20bt4"}}),s({and:[{clock:w,source:n,filter:(e,r)=>!(r.isMultiple||r.isSingle),fn:e=>e+1,target:l}],or:{sid:"tj1y7b"}}),s({and:[{clock:i,source:{form:t,page:n},filter:(e,r)=>!(r.isMultiple||r.isSingle),fn:({form:e,page:r})=>{const o=r-1;return e.answers&&e.answers.length>0&&"value"in e.answers[o].answer&&e.answers[o].answer.value?e.answers[o].answer.value:null},target:c}],or:{sid:"tyzzes"}}),s({and:[{clock:[t,l],source:{form:t,page:n},fn:({form:{answers:e},page:r},o)=>{var h;const a=(M(o)?o:r)-1;return(h=e[a])!=null&&h.answer?e&&e[a].answer&&C(e[a].answer)||e&&e.length>0&&e[a].isSingle?e[a].answer:e&&e.length>0&&"value"in e[a].answer?e[a].answer.value:null:null},target:c}],or:{sid:"uwjflt"}}),s({and:[{clock:l,fn:e=>(window.scrollTo(0,0),e),target:n}],or:{sid:"eus4mk"}}),s({and:[{clock:t,source:{questions:d.$data,form:t},fn:({questions:e,form:{answers:r}})=>Number((r.length/((e==null?void 0:e.length)??0)*100).toFixed(0)),target:g}],or:{sid:"fb9yfe"}}),{$currentPage:n,$currentProgress:g,$currentQuestion:f,$currentValue:c,$scaleForm:t,scaleFormFieldChanged:i,formPageChanged:l}});export{A as T,d as g,C as i,x as s};
