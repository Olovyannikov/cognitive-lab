import{j as s,h as B,T as h,W as p,X as f,ae as x,_ as y,ai as N,$ as w,a1 as _,aj as u,a2 as k,a3 as j,M as m,ak as v,w as $,a8 as P,F as z,I as T,S as Q}from"./chunk-BGEQTlYR.js";import"./chunk-NtKZcLet.js";import{M as C}from"./chunk-YcBQQAAK.js";import{s as g}from"./chunk-CAqCnvYx.js";import{B as F}from"./chunk-CUhXSHDu.js";import{s as n}from"./chunk-BPb3rbqd.js";import{G as M}from"./chunk-C6l9JgSi.js";import{C as q}from"./chunk-DJCED62f.js";const S=({children:e})=>s.jsx(C,{className:g.mkd,options:{overrides:{h1:a=>s.jsx(h,{order:1,className:g.title,children:a.children}),h2:a=>s.jsx(h,{order:2,className:g.title,children:a.children}),p:a=>s.jsx(B,{className:g.text,children:a.children}),blockquote:a=>s.jsx(F,{mb:"md",py:"sm",px:"md",color:"violet.9",bg:"transparent",icon:null,children:a.children}),a:a=>s.jsx(s.Fragment,{children:a.children})}},children:e}),i=p({sid:"8wrxdv",fn:()=>f({initialData:{},effect:x(e=>({url:y.blog.posts,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var r,o;if(!e.result)return{};const a=(o=(r=e.result)==null?void 0:r.payload)==null?void 0:o.toSorted((l,c)=>Number(c.pinned)-Number(l.pinned));return{...e.result,payload:a}}}),name:"getBlogPostsQuery",method:"createQuery"}),V=p({sid:"-1szoee",fn:()=>f({initialData:{},effect:x(e=>({url:y.blog.posts,params:{post_type:"post",page_size:Number(e.page_size),show_on_main:!0,...e}})),mapData:e=>{var r;if(!e.result)return{};const a=(r=e.result)==null?void 0:r.payload.toSorted((o,l)=>Number(l.pinned)-Number(o.pinned)).map(o=>({...o,updated_at:new Date(o.updated_at).toLocaleDateString("ru-RU")}));return{...e.result,payload:a}}}),name:"getAllBlogPostsQuery",method:"createQuery"}),W=p({sid:"-ck1tj0",fn:()=>f({effect:x(e=>({url:y.blog.postById(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});p({sid:"r1uq9s",fn:()=>N(i),name:"none",method:"cache"});const X=w(()=>{const e=_(5,{name:"$pageSize",sid:"2aag3l"}),a=u(i.finished.success.map(({result:t})=>(t==null?void 0:t.payload)??[]),[],{name:"$blogPosts",sid:"-vcd1gb"}),r=u(i.finished.success.map(({result:t})=>t.total_pages),0,{name:"$totalPages",sid:"ua01ft"}),o=k({name:"pageChanged",sid:"-w562qa"}),l=u(o,1,{name:"$currentPage",sid:"-l1rlxv"}),c=j(()=>window.scrollTo(0,0),{name:"scrollToTopFx",sid:"oqoflb"});m({and:[{clock:o,target:c}],or:{sid:"-va5zsa"}}),m({and:[{clock:e,filter:i.$data.map(t=>{var d;return((d=t==null?void 0:t.payload)==null?void 0:d.length)<1}),fn:t=>({page:1,page_size:t}),target:i.refresh}],or:{sid:"-uvvccw"}}),m({and:[{clock:l,source:{page_size:e},fn:({page_size:t},d)=>({page:d,page_size:t}),target:i.refresh}],or:{sid:"-uskksq"}});const b=j(async()=>{await v("/blog")},{name:"redirectToMainBlogPostPageFx",sid:"bpxijm"});return m({and:[{clock:i.finished.failure,target:b}],or:{sid:"-tybw5v"}}),{$pageSize:e,$blogPosts:a,pageChanged:o,$totalPages:r,$currentPage:l,scrollToTopFx:c,redirectToMainBlogPostPageFx:b}}),D=$.memo(({post:e})=>s.jsx(M.Col,{span:{base:12,lg:e.pinned?12:4},className:P(e.pinned&&n.pinned),children:s.jsx(q,{className:n.cardMain,h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:s.jsxs(z,{className:P(n.card,e.pinned&&n.row),gap:"md",children:[s.jsx(T,{className:n.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),s.jsxs(Q,{className:n.preview,justify:"center",children:[s.jsx(h,{className:n.title,children:e.title}),s.jsx(S,{children:e.body.data})]})]})})}));D.displayName="BlogPostCard";export{X as B,D as a,W as b,V as c,i as g};
