import{w as g,O as y,k as P,A as j,V as z,r as N,j as a,l as u,F as S,S as _,T as m,B as $,h as v,m as w,n as C,p as h,q as M,s as O,v as T,t as F,x as f,y as x,z as n,E as I,G as B}from"./chunk-CSBRXxb8.js";import{l as Q}from"./chunk-QDsVyg7a.js";import{M as G}from"./chunk-3V_HSkWF.js";import{s}from"./chunk-9Of7RetC.js";import{G as D}from"./chunk-OqikPoQL.js";import{C as q}from"./chunk-DJkO0eBX.js";import{I as A}from"./chunk-CRZa7ovE.js";import"./chunk-DVMTm1QA.js";import{c as E}from"./chunk-CNlT6ctl.js";const i=g({sid:"8wrxdv",fn:()=>y({initialData:{},effect:P(e=>({url:j.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var o;if(!e.result)return{};const t=(o=e.result)==null?void 0:o.payload.toSorted((c,l)=>Number(l.pinned)-Number(c.pinned));return{...e.result,payload:t}}}),name:"getBlogPostsQuery",method:"createQuery"}),Z=g({sid:"fv08ym",fn:()=>y({effect:P(e=>({url:j.BLOG_POST_BY_ID(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});g({sid:"pod8va",fn:()=>z(i),name:"none",method:"cache"});const L=N.memo(({post:e})=>a.jsx(D.Col,{span:{base:12,lg:e.pinned?12:4},className:u(e.pinned&&s.pinned),children:a.jsx(q,{h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:a.jsxs(S,{className:u(s.card,e.pinned&&s.row),gap:"md",children:[a.jsx(A,{className:s.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),a.jsxs(_,{className:s.preview,justify:"center",children:[a.jsx(m,{className:s.title,children:e.title}),a.jsx($,{className:s.text,children:a.jsx(G,{options:{overrides:{h1:t=>a.jsx(m,{order:1,className:s.title,children:t.children}),h2:t=>a.jsx(m,{order:2,className:s.title,children:t.children}),p:t=>a.jsx(v,{className:s.text,children:t.children})}},children:e.body.data})}),a.jsx(w,{variant:"subtle",rightSection:a.jsx(Q,{}),className:s.more,children:"Читать"})]})]})})}));L.displayName="BlogPostCard";const b=C(()=>{const e=h(1,{name:"$currentPage",sid:"ytwjf1"}),t=M({name:"pageChanged",sid:"oolbf0"}),o=h(5,{name:"$pageSize",sid:"46gxod"}),c=O(i.finished.success.map(r=>r.result.total_pages),1,{name:"$totalPages",sid:"ua01ft"}),l=T(async()=>{await I("/blog?page=1")},{name:"redirectToMainBlogPostPageFx",sid:"-k035vf"});return F({clock:[x.matched,f.matched],source:{isDesktop:x.$matches,isMobile:f.$matches},target:{$currentPage:e,$pageSize:o},fn:(r,{isDesktop:d,isMobile:k})=>{r.$currentPage(1),d&&r.$pageSize(10),k&&r.$pageSize(5)}}),n({and:[{clock:t,target:e}],or:{sid:"-uc2qzw"}}),n({and:[{clock:o,fn:r=>({page:1,page_size:r}),target:i.refresh}],or:{sid:"-txs3ki"}}),n({and:[{clock:e,source:{page_size:o},fn:({page_size:r},d)=>({page:d,page_size:r}),target:i.refresh}],or:{sid:"-tuhc0c"}}),n({and:[{clock:i.finished.failure,target:l}],or:{sid:"-tdzi7i"}}),{$currentPage:e,$pageSize:o,pageChanged:t,$totalPages:c}}),p=E();B({key:"page_size",pickup:p,store:b.$pageSize,deserialize:e=>Number(e)});B({key:"page",pickup:p,store:b.$currentPage,deserialize:e=>Number(e)});const ee=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:p},Symbol.toStringTag,{value:"Module"}));export{b as B,L as a,Z as b,i as g,ee as i};
