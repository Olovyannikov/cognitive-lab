import{Z as x,bg as b,$ as p,a0 as f,a1 as h,a2 as g,a5 as j,a6 as k,a7 as F,M as r,bh as w,bi as v,E as S,f as n,u as E,a9 as T,j as s,H as I,k as R,bj as M,aJ as N,a as P,Y as z,bk as B}from"./chunk-zZ4wVjwK.js";import{d as O}from"./chunk-BvL8QmUP.js";import{I as H}from"./chunk-BxHD5_6u.js";import{s as m}from"./chunk-Cwmt49qL.js";const i=x({sid:"-s4ky2h",fn:()=>b({effect:p(({user_report_id:e,...o})=>({url:h.surveys.email(e),method:f.POST,body:o}))}),name:"sendFreeReportOnEmailMutation",method:"createMutation"}),L=g(()=>{const e=j({name:"submitForm",sid:"-261mp6"}),o=k(a=>{F.show({title:"Отчет отправлен!",message:`Отчет отправлен на почту ${a}`})},{name:"showUserEmailNotificationFx",sid:"82dtwb"});return r({and:[{clock:e,target:i.start}],or:{sid:"-fgmro9"}}),r({and:[{clock:i.finished.success,filter:({params:a})=>!!a.email,fn:({params:{email:a}})=>a,target:o}],or:{sid:"-f2c48v"}}),{submitForm:e}}),_=w({email:v().min(1,{message:"Обязательное поле"}).email("Введите почту в формате example@mail.org")}),A=({type:e="text"})=>{const o=S(),{pending:a}=n(i),[l]=n([L.submitForm]),{routeParams:{reportId:d}}=E(),t=T({mode:"controlled",initialValues:{email:"",user_report_id:d??""},validate:B(_)}),c=t.onSubmit(u=>{l(u)});return s.jsx(H,{className:e==="block"?m.container:"",children:s.jsx("form",{onSubmit:c,children:s.jsxs(I,{className:m.wrapper,children:[e==="text"&&s.jsx(R,{fw:"bold",visibleFrom:"md",fz:24,children:"Отправьте отчет на почту"}),s.jsx(M,{active:!!t.errors.email,children:s.jsx(N,{inputMode:"email",disabled:a,placeholder:"name@mail.ru",miw:o?380:"100%",ml:e==="text"?"auto":0,size:e==="block"?"lg":"md",bg:e==="block"?"violet.0":"white",...t.getInputProps("email")},t.key("email"))}),s.jsx(P,{type:"submit",loading:a,fullWidth:!o,disabled:a,size:e==="block"?"lg":"md",leftSection:s.jsx(O,{size:20}),variant:e==="block"?void 0:"default",c:e==="block"&&!a?"white":"dark.7",px:"md",children:o?"Отправить":"Отправить отчет на почту"}),s.jsx(z,{px:"md",children:"Купить полный отчёт"})]})})})};export{A as S};
