import{w as y,O as z,k as $,A as N,V as C,r as O,j as s,l as j,F,S as I,T as h,B as L,h as Q,m as A,n as D,p as b,q as E,s as G,v as R,t as q,x as S,y as B,z as p,E as U,G as V,H}from"./chunk-CHCsJ8-A.js";import{l as Y}from"./chunk-DkRnzjwy.js";import{M as J}from"./chunk-1DxcDAGR.js";import{s as o}from"./chunk-BvjKq-Jn.js";import{G as K}from"./chunk-ik5qHGx5.js";import{C as W}from"./chunk-DgI0hAIn.js";import{I as X}from"./chunk-cJnfX0tW.js";import"./chunk-BzYqsYoP.js";import{c as Z}from"./chunk-CSpjPqCP.js";const d=y({sid:"8wrxdv",fn:()=>z({initialData:{},effect:$(e=>({url:N.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var t;if(!e.result)return{};const a=(t=e.result)==null?void 0:t.payload.toSorted((i,n)=>Number(n.pinned)-Number(i.pinned));return{...e.result,payload:a}}}),name:"getBlogPostsQuery",method:"createQuery"}),ge=y({sid:"fv08ym",fn:()=>z({effect:$(e=>({url:N.BLOG_POST_BY_ID(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});y({sid:"pod8va",fn:()=>C(d),name:"none",method:"cache"});const ee=O.memo(({post:e})=>s.jsx(K.Col,{span:{base:12,lg:e.pinned?12:4},className:j(e.pinned&&o.pinned),children:s.jsx(W,{h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:s.jsxs(F,{className:j(o.card,e.pinned&&o.row),gap:"md",children:[s.jsx(X,{className:o.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),s.jsxs(I,{className:o.preview,justify:"center",children:[s.jsx(h,{className:o.title,children:e.title}),s.jsx(L,{className:o.text,children:s.jsx(J,{options:{overrides:{h1:a=>s.jsx(h,{order:1,className:o.title,children:a.children}),h2:a=>s.jsx(h,{order:2,className:o.title,children:a.children}),p:a=>s.jsx(Q,{className:o.text,children:a.children})}},children:e.body.data})}),s.jsx(A,{variant:"subtle",rightSection:s.jsx(Y,{}),className:o.more,children:"Читать"})]})]})})}));ee.displayName="BlogPostCard";const _=D(()=>{const e=b(1,{name:"$currentPage",sid:"ycux0u"}),a=E({name:"pageChanged",sid:"o7jp0t"}),t=b(5,{name:"$pageSize",sid:"3pfba6"}),i=G(d.finished.success.map(r=>r.result.total_pages),1,{name:"$totalPages",sid:"tsyf1m"}),n=R(async()=>{await U("/blog?page=1")},{name:"redirectToMainBlogPostPageFx",sid:"-kh4s9m"});return q({clock:[B.matched,S.matched],source:{isDesktop:B.$matches,isMobile:S.$matches},target:{$currentPage:e,$pageSize:t},fn:(r,{isDesktop:c,isMobile:m})=>{r.$currentPage(1),c&&r.$pageSize(10),m&&r.$pageSize(5)}}),p({and:[{clock:a,target:e}],or:{sid:"-ucmjl9"}}),p({and:[{clock:t,fn:r=>({page:1,page_size:r}),target:d.refresh}],or:{sid:"-tybw5v"}}),p({and:[{clock:e,source:{page_size:t},fn:({page_size:r},c)=>({page:c,page_size:r}),target:d.refresh}],or:{sid:"-tv14lp"}}),p({and:[{clock:d.finished.failure,target:n}],or:{sid:"-tejasv"}}),{$currentPage:e,$pageSize:t,pageChanged:a,$totalPages:i}});var f,u,ae=Symbol(),g=new Map,te=e=>location.pathname+(e+""?"?"+e:"")+(location.hash&&location.hash!=="#"?location.hash:""),se=(e,a)=>history.pushState(a?null:history.state,"",te(e));function k(e,a){if(u=void 0,g.size){var t=new URLSearchParams(location.search);for(var[i,n]of g.entries())n!=null?t.set(i,`${n}`):t.delete(i);g.clear(),e(t,a==="erase")}}function w(e){return typeof history<"u"&&typeof location<"u"?function({method:a=se,state:t,serialize:i,deserialize:n,def:r=null,timeout:c}){var m=(v,M)=>(typeof addEventListener<"u"&&addEventListener("popstate",()=>setTimeout(M,0)),{get(){var l=new URLSearchParams(location.search).get(v);return l?n?n(l):l:r},set(l){if(g.set(v,i?i(l):l),c===void 0)return clearTimeout(f),k(a,t);var P=Date.now()+c;(u===void 0||u>P)&&(clearTimeout(f),u=P,f=setTimeout(k,c,a,t))}});return m.keyArea=ae,m}({...e}):H({keyArea:"query"})}function re(e){return a=>V({adapter:w,...e,...a})}w.factory=!0;var T=re();const x=Z();T({key:"page_size",pickup:x,store:_.$pageSize,deserialize:e=>Number(e)});T({key:"page",pickup:x,store:_.$currentPage,deserialize:e=>Number(e)});const he=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:x},Symbol.toStringTag,{value:"Module"}));export{_ as B,ee as a,ge as b,d as g,he as i};
