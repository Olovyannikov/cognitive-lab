import{w as p,O as y,k as j,A as P,V as S,r as _,j as a,l as u,F as k,S as $,T as m,B as z,h as v,m as w,n as C,p as h,q as M,s as O,v as T,t as F,x as f,y as x,z as n,E as I,G as b}from"./chunk-D_Jobeee.js";import{c as Q}from"./chunk-CcxiH2qh.js";import{l as G}from"./chunk-DuZYKmkt.js";import{M as D}from"./chunk-CsU4UicU.js";import{s}from"./chunk-9Of7RetC.js";import{G as A}from"./chunk-BrILYL3l.js";import{C as E}from"./chunk-4PsD3MVb.js";import{I as q}from"./chunk-Ccy68Yyz.js";import"./chunk-BYHs4wmI.js";const i=p({sid:"8wrxdv",fn:()=>y({initialData:{},effect:j(e=>({url:P.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var o;if(!e.result)return{};const t=(o=e.result)==null?void 0:o.payload.toSorted((c,l)=>Number(l.pinned)-Number(c.pinned));return{...e.result,payload:t}}}),name:"getBlogPostsQuery",method:"createQuery"}),Z=p({sid:"fv08ym",fn:()=>y({effect:j(e=>({url:P.BLOG_POST_BY_ID(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});p({sid:"pod8va",fn:()=>S(i),name:"none",method:"cache"});const L=_.memo(({post:e})=>a.jsx(A.Col,{span:{base:12,lg:e.pinned?12:4},className:u(e.pinned&&s.pinned),children:a.jsx(E,{h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:a.jsxs(k,{className:u(s.card,e.pinned&&s.row),gap:"md",children:[a.jsx(q,{className:s.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),a.jsxs($,{className:s.preview,justify:"center",children:[a.jsx(m,{className:s.title,children:e.title}),a.jsx(z,{className:s.text,children:a.jsx(D,{options:{overrides:{h1:t=>a.jsx(m,{order:1,className:s.title,children:t.children}),h2:t=>a.jsx(m,{order:2,className:s.title,children:t.children}),p:t=>a.jsx(v,{className:s.text,children:t.children})}},children:e.body.data})}),a.jsx(w,{variant:"subtle",rightSection:a.jsx(G,{}),className:s.more,children:"Читать"})]})]})})}));L.displayName="BlogPostCard";const B=C(()=>{const e=h(1,{name:"$currentPage",sid:"ycux0u"}),t=M({name:"pageChanged",sid:"o7jp0t"}),o=h(5,{name:"$pageSize",sid:"3pfba6"}),c=O(i.finished.success.map(r=>r.result.total_pages),1,{name:"$totalPages",sid:"tsyf1m"}),l=T(async()=>{await I("/blog?page=1")},{name:"redirectToMainBlogPostPageFx",sid:"-kh4s9m"});return F({clock:[x.matched,f.matched],source:{isDesktop:x.$matches,isMobile:f.$matches},target:{$currentPage:e,$pageSize:o},fn:(r,{isDesktop:d,isMobile:N})=>{r.$currentPage(1),d&&r.$pageSize(10),N&&r.$pageSize(5)}}),n({and:[{clock:t,target:e}],or:{sid:"-ucmjl9"}}),n({and:[{clock:o,fn:r=>({page:1,page_size:r}),target:i.refresh}],or:{sid:"-tybw5v"}}),n({and:[{clock:e,source:{page_size:o},fn:({page_size:r},d)=>({page:d,page_size:r}),target:i.refresh}],or:{sid:"-tv14lp"}}),n({and:[{clock:i.finished.failure,target:l}],or:{sid:"-tejasv"}}),{$currentPage:e,$pageSize:o,pageChanged:t,$totalPages:c}}),g=Q();b({key:"page_size",pickup:g,store:B.$pageSize,deserialize:e=>Number(e)});b({key:"page",pickup:g,store:B.$currentPage,deserialize:e=>Number(e)});const ee=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:g},Symbol.toStringTag,{value:"Module"}));export{B,L as a,Z as b,i as g,ee as i};
