import{w as g,O as S,k as b,A as z,V as O,r as I,j as t,l as B,F as L,S as Q,T as u,B as q,h as A,m as F,n as N,p as D,q as E,v as G,s as R,M as h,t as U,x as V}from"./chunk-qI5YmFx1.js";import{l as Y}from"./chunk-JRWJC5f-.js";import{M as H}from"./chunk-Djzc62HD.js";import{s as r}from"./chunk-BvjKq-Jn.js";import{G as J}from"./chunk-DBzRVmFk.js";import{C as K}from"./chunk-DTRP59sy.js";import{I as W}from"./chunk-DLJ49ZWi.js";import"./chunk-zPVrrV-e.js";import{c as X}from"./chunk-DecrUa7p.js";const d=g({sid:"8wrxdv",fn:()=>S({initialData:{},effect:b(e=>({url:z.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var s;if(!e.result)return{};const a=(s=e.result)==null?void 0:s.payload.toSorted((o,i)=>Number(i.pinned)-Number(o.pinned));return{...e.result,payload:a}}}),name:"getBlogPostsQuery",method:"createQuery"}),he=g({sid:"fv08ym",fn:()=>S({effect:b(e=>({url:z.BLOG_POST_BY_ID(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});g({sid:"pod8va",fn:()=>O(d),name:"none",method:"cache"});const Z=I.memo(({post:e})=>t.jsx(J.Col,{span:{base:12,lg:e.pinned?12:4},className:B(e.pinned&&r.pinned),children:t.jsx(K,{withBorder:!0,component:"a",href:`/blog/${e.id}`,children:t.jsxs(L,{className:B(r.card,e.pinned&&r.row),gap:"md",children:[t.jsx(W,{className:r.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),t.jsxs(Q,{className:r.preview,justify:"center",children:[t.jsx(u,{className:r.title,children:e.title}),t.jsx(q,{className:r.text,children:t.jsx(H,{options:{overrides:{h1:a=>t.jsx(u,{order:1,className:r.title,children:a.children}),h2:a=>t.jsx(u,{order:2,className:r.title,children:a.children}),p:a=>t.jsx(A,{className:r.text,children:a.children})}},children:e.body.data})}),t.jsx(F,{variant:"subtle",rightSection:t.jsx(Y,{}),className:r.more,children:"Читать"})]})]})})}));Z.displayName="BlogPostCard";const f=N(1,{name:"$currentPage",sid:"-cmouur"}),_=D({name:"pageChanged",sid:"-zeuriq"}),k=N(10,{name:"$pageSize",sid:"ao2pea"}),ee=E(d.finished.success.map(e=>e.result.total_pages),1,{name:"$totalPages",sid:"rfqaz7"}),ae=G(async()=>{await R("/blog?page=1")},{name:"redirectToMainBlogPostPageFx",sid:"-wsaz47"});h({and:[{clock:_,target:f}],or:{sid:"-vpk8hu"}});h({and:[{clock:f,source:{page_size:k},fn:({page_size:e},a)=>({page:a,page_size:e}),target:d.refresh}],or:{sid:"-vb9l2g"}});h({and:[{clock:d.finished.failure,target:ae}],or:{sid:"-uurr9m"}});const w={$currentPage:f,$pageSize:k,pageChanged:_,$totalPages:ee};var p,l,te=Symbol(),c=new Map,re=e=>location.pathname+(e+""?"?"+e:"")+(location.hash&&location.hash!=="#"?location.hash:""),se=(e,a)=>history.pushState(a?null:history.state,"",re(e));function j(e,a){if(l=void 0,c.size){var s=new URLSearchParams(location.search);for(var[o,i]of c.entries())i!=null?s.set(o,`${i}`):s.delete(o);c.clear(),e(s,a==="erase")}}function T(e){return typeof history<"u"&&typeof location<"u"?function({method:a=se,state:s,serialize:o,deserialize:i,def:C=null,timeout:m}){var x=(v,M)=>(typeof addEventListener<"u"&&addEventListener("popstate",()=>setTimeout(M,0)),{get(){var n=new URLSearchParams(location.search).get(v);return n?i?i(n):n:C},set(n){if(c.set(v,o?o(n):n),m===void 0)return clearTimeout(p),j(a,s);var P=Date.now()+m;(l===void 0||l>P)&&(clearTimeout(p),l=P,p=setTimeout(j,m,a,s))}});return x.keyArea=te,x}({...e}):V({keyArea:"query"})}function oe(e){return a=>U({adapter:T,...e,...a})}T.factory=!0;var $=oe();const y=X();$({key:"page_size",pickup:y,store:w.$pageSize,deserialize:e=>Number(e)});$({key:"page",pickup:y,store:w.$currentPage,deserialize:e=>Number(e)});const fe=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:y},Symbol.toStringTag,{value:"Module"}));export{w as B,Z as a,he as b,d as g,fe as i};
