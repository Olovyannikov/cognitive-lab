import{w as p,k,l as _,m as Ke,n as We,j as n,B as G,aB as _t,s as ge,al as kt,aw as Ue,bn as te,bo as ye,bp as ve,bq as Nt,aF as Qe,ay as xe,q as Me,r as It,b8 as Vt,a8 as Bt,br as Ht,bs as Je,aa as w,ab as Tt,bt as $t,a1 as we,M,u as oe,S as Ft,T as Rt,bu as Mt,af as zt,h as z,a3 as Zt,a0 as Lt,a2 as Xe,bv as K,bw as qt,bx as Ye,W as Gt,e as q,a5 as ze,J as et,by as Kt,a6 as Wt,ak as Ut,N as Qt,a7 as Jt,z as Xt,F as Yt,aG as eo,A as Ze,bz as tt}from"./chunk-BGEQTlYR.js";import{P as to}from"./chunk-BuzBfx_g.js";import{s as L}from"./chunk-C1UfUYGV.js";import{N as oo}from"./chunk-U7jEhp_f.js";import{F as ro}from"./chunk-DuZj9she.js";import"./chunk-NtKZcLet.js";import{s as Le}from"./chunk-D_TSPZfq.js";import{a as so}from"./chunk-DsY0Dt49.js";import{I as ao}from"./chunk-DOZZHTaz.js";import{s as no}from"./chunk-CbXVoNv_.js";import{c as lo}from"./chunk-Dff58Z8z.js";function co(e){const t=p.useRef(void 0);return p.useEffect(()=>{t.current=e},[e]),t.current}function ot(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>ot(t))}:e}function io(e){return e?e.map(t=>ot(t)):[]}function rt(e){return e.reduce((t,o)=>"group"in o?{...t,...rt(o.items)}:(t[o.value]=o,t),{})}var j={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const uo={error:null},po=We((e,{size:t,color:o})=>({chevron:{"--combobox-chevron-size":ge(t,"combobox-chevron-size"),"--combobox-chevron-color":o?_t(o,e):void 0}})),Ce=k((e,t)=>{const o=_("ComboboxChevron",uo,e),{size:r,error:a,style:i,className:s,classNames:d,styles:c,unstyled:l,vars:m,mod:u,...f}=o,y=Ke({name:"ComboboxChevron",classes:j,props:o,style:i,className:s,classNames:d,styles:c,unstyled:l,vars:m,varsResolver:po,rootSelector:"chevron"});return n.jsx(G,{component:"svg",...f,...y("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:a},u],ref:t,children:n.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Ce.classes=j;Ce.displayName="@mantine/core/ComboboxChevron";const[mo,B]=kt("Combobox component was not found in tree"),st=p.forwardRef(({size:e,onMouseDown:t,onClick:o,onClear:r,...a},i)=>n.jsx(Ue.ClearButton,{ref:i,tabIndex:-1,"aria-hidden":!0,...a,onMouseDown:s=>{s.preventDefault(),t==null||t(s)},onClick:s=>{r(),o==null||o(s)}}));st.displayName="@mantine/core/ComboboxClearButton";const bo={},Se=k((e,t)=>{const{classNames:o,styles:r,className:a,style:i,hidden:s,...d}=_("ComboboxDropdown",bo,e),c=B();return n.jsx(te.Dropdown,{...d,ref:t,role:"presentation","data-hidden":s||void 0,...c.getStyles("dropdown",{className:a,style:i,classNames:o,styles:r})})});Se.classes=j;Se.displayName="@mantine/core/ComboboxDropdown";const fo={refProp:"ref"},at=k((e,t)=>{const{children:o,refProp:r}=_("ComboboxDropdownTarget",fo,e);if(B(),!ye(o))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return n.jsx(te.Target,{ref:t,refProp:r,children:o})});at.displayName="@mantine/core/ComboboxDropdownTarget";const ho={},De=k((e,t)=>{const{classNames:o,className:r,style:a,styles:i,vars:s,...d}=_("ComboboxEmpty",ho,e),c=B();return n.jsx(G,{ref:t,...c.getStyles("empty",{className:r,classNames:o,styles:i,style:a}),...d})});De.classes=j;De.displayName="@mantine/core/ComboboxEmpty";function Ee({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:o,withExpandedAttribute:r,targetType:a,autoComplete:i}){const s=B(),[d,c]=p.useState(null),l=u=>{if(e==null||e(u),!s.readOnly&&t){if(u.nativeEvent.isComposing)return;if(u.nativeEvent.code==="ArrowDown"&&(u.preventDefault(),s.store.dropdownOpened?c(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),c(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),u.nativeEvent.code==="ArrowUp"&&(u.preventDefault(),s.store.dropdownOpened?c(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),c(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),u.nativeEvent.code==="Enter"||u.nativeEvent.code==="NumpadEnter"){if(u.nativeEvent.keyCode===229)return;const f=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&f!==-1?(u.preventDefault(),s.store.clickSelectedOption()):a==="button"&&(u.preventDefault(),s.store.openDropdown("keyboard"))}u.key==="Escape"&&s.store.closeDropdown("keyboard"),u.nativeEvent.code==="Space"&&a==="button"&&(u.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...o?{"aria-haspopup":"listbox","aria-expanded":r&&!!(s.store.listId&&s.store.dropdownOpened)||void 0,"aria-controls":s.store.dropdownOpened&&s.store.listId?s.store.listId:void 0,"aria-activedescendant":s.store.dropdownOpened&&d||void 0,autoComplete:i,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:l}}const go={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},nt=k((e,t)=>{const{children:o,refProp:r,withKeyboardNavigation:a,withAriaAttributes:i,withExpandedAttribute:s,targetType:d,autoComplete:c,...l}=_("ComboboxEventsTarget",go,e);if(!ye(o))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const m=B(),u=Ee({targetType:d,withAriaAttributes:i,withKeyboardNavigation:a,withExpandedAttribute:s,onKeyDown:o.props.onKeyDown,autoComplete:c});return p.cloneElement(o,{...u,...l,[r]:ve(t,m.store.targetRef,Nt(o))})});nt.displayName="@mantine/core/ComboboxEventsTarget";const xo={},Ae=k((e,t)=>{const{classNames:o,className:r,style:a,styles:i,vars:s,...d}=_("ComboboxFooter",xo,e),c=B();return n.jsx(G,{ref:t,...c.getStyles("footer",{className:r,classNames:o,style:a,styles:i}),...d,onMouseDown:l=>{l.preventDefault()}})});Ae.classes=j;Ae.displayName="@mantine/core/ComboboxFooter";const yo={},Pe=k((e,t)=>{const{classNames:o,className:r,style:a,styles:i,vars:s,children:d,label:c,...l}=_("ComboboxGroup",yo,e),m=B();return n.jsxs(G,{ref:t,...m.getStyles("group",{className:r,classNames:o,style:a,styles:i}),...l,children:[c&&n.jsx("div",{...m.getStyles("groupLabel",{classNames:o,styles:i}),children:c}),d]})});Pe.classes=j;Pe.displayName="@mantine/core/ComboboxGroup";const vo={},Oe=k((e,t)=>{const{classNames:o,className:r,style:a,styles:i,vars:s,...d}=_("ComboboxHeader",vo,e),c=B();return n.jsx(G,{ref:t,...c.getStyles("header",{className:r,classNames:o,style:a,styles:i}),...d,onMouseDown:l=>{l.preventDefault()}})});Oe.classes=j;Oe.displayName="@mantine/core/ComboboxHeader";function lt({value:e,valuesDivider:t=",",...o}){return n.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...o})}lt.displayName="@mantine/core/ComboboxHiddenInput";const wo={},je=k((e,t)=>{const o=_("ComboboxOption",wo,e),{classNames:r,className:a,style:i,styles:s,vars:d,onClick:c,id:l,active:m,onMouseDown:u,onMouseOver:f,disabled:y,selected:P,mod:D,...b}=o,x=B(),$=p.useId(),E=l||$;return n.jsx(G,{...x.getStyles("option",{className:a,classNames:r,styles:s,style:i}),...b,ref:t,id:E,mod:["combobox-option",{"combobox-active":m,"combobox-disabled":y,"combobox-selected":P},D],role:"option",onClick:v=>{var N;y?v.preventDefault():((N=x.onOptionSubmit)==null||N.call(x,o.value,o),c==null||c(v))},onMouseDown:v=>{v.preventDefault(),u==null||u(v)},onMouseOver:v=>{x.resetSelectionOnOptionHover&&x.store.resetSelectedOption(),f==null||f(v)}})});je.classes=j;je.displayName="@mantine/core/ComboboxOption";const Co={},_e=k((e,t)=>{const o=_("ComboboxOptions",Co,e),{classNames:r,className:a,style:i,styles:s,id:d,onMouseDown:c,labelledBy:l,...m}=o,u=B(),f=Qe(d);return p.useEffect(()=>{u.store.setListId(f)},[f]),n.jsx(G,{ref:t,...u.getStyles("options",{className:a,style:i,classNames:r,styles:s}),...m,id:f,role:"listbox","aria-labelledby":l,onMouseDown:y=>{y.preventDefault(),c==null||c(y)}})});_e.classes=j;_e.displayName="@mantine/core/ComboboxOptions";const So={withAriaAttributes:!0,withKeyboardNavigation:!0},ke=k((e,t)=>{const o=_("ComboboxSearch",So,e),{classNames:r,styles:a,unstyled:i,vars:s,withAriaAttributes:d,onKeyDown:c,withKeyboardNavigation:l,size:m,...u}=o,f=B(),y=f.getStyles("search"),P=Ee({targetType:"input",withAriaAttributes:d,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:c,autoComplete:"off"});return n.jsx(Ue,{ref:ve(t,f.store.searchRef),classNames:[{input:y.className},r],styles:[{input:y.style},a],size:m||f.size,...P,...u,__staticSelector:"Combobox"})});ke.classes=j;ke.displayName="@mantine/core/ComboboxSearch";const Do={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ct=k((e,t)=>{const{children:o,refProp:r,withKeyboardNavigation:a,withAriaAttributes:i,withExpandedAttribute:s,targetType:d,autoComplete:c,...l}=_("ComboboxTarget",Do,e);if(!ye(o))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const m=B(),u=Ee({targetType:d,withAriaAttributes:i,withKeyboardNavigation:a,withExpandedAttribute:s,onKeyDown:o.props.onKeyDown,autoComplete:c}),f=p.cloneElement(o,{...u,...l});return n.jsx(te.Target,{ref:ve(t,m.store.targetRef),children:f})});ct.displayName="@mantine/core/ComboboxTarget";function Eo(e,t,o){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(o){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Ao(e,t,o){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(o){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Po(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function it({defaultOpened:e,opened:t,onOpenedChange:o,onDropdownClose:r,onDropdownOpen:a,loop:i=!0,scrollBehavior:s="instant"}={}){const[d,c]=xe({value:t,defaultValue:e,finalValue:!1,onChange:o}),l=p.useRef(null),m=p.useRef(-1),u=p.useRef(null),f=p.useRef(null),y=p.useRef(-1),P=p.useRef(-1),D=p.useRef(-1),b=p.useCallback((h="unknown")=>{d||(c(!0),a==null||a(h))},[c,a,d]),x=p.useCallback((h="unknown")=>{d&&(c(!1),r==null||r(h))},[c,r,d]),$=p.useCallback((h="unknown")=>{d?x(h):b(h)},[x,b,d]),E=p.useCallback(()=>{const h=document.querySelector(`#${l.current} [data-combobox-selected]`);h==null||h.removeAttribute("data-combobox-selected"),h==null||h.removeAttribute("aria-selected")},[]),v=p.useCallback(h=>{const A=document.getElementById(l.current),C=A==null?void 0:A.querySelectorAll("[data-combobox-option]");if(!C)return null;const O=h>=C.length?0:h<0?C.length-1:h;return m.current=O,C!=null&&C[O]&&!C[O].hasAttribute("data-combobox-disabled")?(E(),C[O].setAttribute("data-combobox-selected","true"),C[O].setAttribute("aria-selected","true"),C[O].scrollIntoView({block:"nearest",behavior:s}),C[O].id):null},[s,E]),N=p.useCallback(()=>{const h=document.querySelector(`#${l.current} [data-combobox-active]`);if(h){const A=document.querySelectorAll(`#${l.current} [data-combobox-option]`),C=Array.from(A).findIndex(O=>O===h);return v(C)}return v(0)},[v]),H=p.useCallback(()=>v(Ao(m.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),i)),[v,i]),ne=p.useCallback(()=>v(Eo(m.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),i)),[v,i]),le=p.useCallback(()=>v(Po(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[v]),ce=p.useCallback((h="selected",A)=>{D.current=window.setTimeout(()=>{var X;const C=document.querySelectorAll(`#${l.current} [data-combobox-option]`),O=Array.from(C).findIndex(me=>me.hasAttribute(`data-combobox-${h}`));m.current=O,A!=null&&A.scrollIntoView&&((X=C[O])==null||X.scrollIntoView({block:"nearest",behavior:s}))},0)},[]),ie=p.useCallback(()=>{m.current=-1,E()},[E]),Q=p.useCallback(()=>{const h=document.querySelectorAll(`#${l.current} [data-combobox-option]`),A=h==null?void 0:h[m.current];A==null||A.click()},[]),F=p.useCallback(h=>{l.current=h},[]),de=p.useCallback(()=>{y.current=window.setTimeout(()=>u.current.focus(),0)},[]),ue=p.useCallback(()=>{P.current=window.setTimeout(()=>f.current.focus(),0)},[]),pe=p.useCallback(()=>m.current,[]);return p.useEffect(()=>()=>{window.clearTimeout(y.current),window.clearTimeout(P.current),window.clearTimeout(D.current)},[]),{dropdownOpened:d,openDropdown:b,closeDropdown:x,toggleDropdown:$,selectedOptionIndex:m.current,getSelectedOptionIndex:pe,selectOption:v,selectFirstOption:le,selectActiveOption:N,selectNextOption:H,selectPreviousOption:ne,resetSelectedOption:ie,updateSelectedOptionIndex:ce,listId:l.current,setListId:F,clickSelectedOption:Q,searchRef:u,focusSearchInput:de,targetRef:f,focusTarget:ue}}const Oo={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0},size:"sm"},jo=We((e,{size:t,dropdownPadding:o})=>({options:{"--combobox-option-fz":Me(t),"--combobox-option-padding":ge(t,"combobox-option-padding")},dropdown:{"--combobox-padding":o===void 0?void 0:It(o),"--combobox-option-fz":Me(t),"--combobox-option-padding":ge(t,"combobox-option-padding")}}));function g(e){const t=_("Combobox",Oo,e),{classNames:o,styles:r,unstyled:a,children:i,store:s,vars:d,onOptionSubmit:c,onClose:l,size:m,dropdownPadding:u,resetSelectionOnOptionHover:f,__staticSelector:y,readOnly:P,...D}=t,b=it(),x=s||b,$=Ke({name:y||"Combobox",classes:j,props:t,classNames:o,styles:r,unstyled:a,vars:d,varsResolver:jo}),E=()=>{l==null||l(),x.closeDropdown()};return n.jsx(mo,{value:{getStyles:$,store:x,onOptionSubmit:c,size:m,resetSelectionOnOptionHover:f,readOnly:P},children:n.jsx(te,{opened:x.dropdownOpened,...D,onChange:v=>!v&&E(),withRoles:!1,unstyled:a,children:i})})}const _o=e=>e;g.extend=_o;g.classes=j;g.displayName="@mantine/core/Combobox";g.Target=ct;g.Dropdown=Se;g.Options=_e;g.Option=je;g.Search=ke;g.Empty=De;g.Chevron=Ce;g.Footer=Ae;g.Header=Oe;g.EventsTarget=nt;g.DropdownTarget=at;g.Group=Pe;g.ClearButton=st;g.HiddenInput=lt;function J(e){return"group"in e}function dt({options:e,search:t,limit:o}){const r=t.trim().toLowerCase(),a=[];for(let i=0;i<e.length;i+=1){const s=e[i];if(a.length===o)return a;J(s)&&a.push({group:s.group,items:dt({options:s.items,search:t,limit:o-a.length})}),J(s)||s.label.toLowerCase().includes(r)&&a.push(s)}return a}function ko(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function ut(e,t=new Set){if(Array.isArray(e))for(const o of e)if(J(o))ut(o.items,t);else{if(typeof o.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof o.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof o.value}`);if(t.has(o.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${o.value}" was provided more than once`);t.add(o.value)}}function No(e,t){return Array.isArray(e)?e.includes(t):e===t}function pt({data:e,withCheckIcon:t,value:o,checkIconPosition:r,unstyled:a,renderOption:i}){if(!J(e)){const d=No(o,e.value),c=t&&d&&n.jsx(so,{className:j.optionsDropdownCheckIcon}),l=n.jsxs(n.Fragment,{children:[r==="left"&&c,n.jsx("span",{children:e.label}),r==="right"&&c]});return n.jsx(g.Option,{value:e.value,disabled:e.disabled,className:Bt({[j.optionsDropdownOption]:!a}),"data-reverse":r==="right"||void 0,"data-checked":d||void 0,"aria-selected":d,active:d,children:typeof i=="function"?i({option:e,checked:d}):l})}const s=e.items.map(d=>n.jsx(pt,{data:d,value:o,unstyled:a,withCheckIcon:t,checkIconPosition:r,renderOption:i},d.value));return n.jsx(g.Group,{label:e.group,children:s})}function Io({data:e,hidden:t,hiddenWhenEmpty:o,filter:r,search:a,limit:i,maxDropdownHeight:s,withScrollArea:d=!0,filterOptions:c=!0,withCheckIcon:l=!1,value:m,checkIconPosition:u,nothingFoundMessage:f,unstyled:y,labelId:P,renderOption:D,scrollAreaProps:b,"aria-label":x}){ut(e);const E=typeof a=="string"?(r||dt)({options:e,search:c?a:"",limit:i??1/0}):e,v=ko(E),N=E.map(H=>n.jsx(pt,{data:H,withCheckIcon:l,value:m,checkIconPosition:u,unstyled:y,renderOption:D},J(H)?H.group:H.value));return n.jsx(g.Dropdown,{hidden:t||o&&v,"data-composed":!0,children:n.jsxs(g.Options,{labelledBy:P,"aria-label":x,children:[d?n.jsx(Vt.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...b,children:N}):N,v&&f&&n.jsx(g.Empty,{children:f})]})})}const Vo={withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Ne=k((e,t)=>{const o=_("Select",Vo,e),{classNames:r,styles:a,unstyled:i,vars:s,dropdownOpened:d,defaultDropdownOpened:c,onDropdownClose:l,onDropdownOpen:m,onFocus:u,onBlur:f,onClick:y,onChange:P,data:D,value:b,defaultValue:x,selectFirstOptionOnChange:$,onOptionSubmit:E,comboboxProps:v,readOnly:N,disabled:H,filter:ne,limit:le,withScrollArea:ce,maxDropdownHeight:ie,size:Q,searchable:F,rightSection:de,checkIconPosition:ue,withCheckIcon:pe,nothingFoundMessage:h,name:A,form:C,searchValue:O,defaultSearchValue:X,onSearchChange:me,allowDeselect:gt,error:Ve,rightSectionPointerEvents:xt,id:yt,clearable:vt,clearButtonProps:wt,hiddenInputProps:Ct,renderOption:St,onClear:be,autoComplete:Dt,scrollAreaProps:Et,__defaultRightSection:Wo,__clearSection:Uo,__clearable:Qo,chevronColor:At,...Y}=o,fe=p.useMemo(()=>io(D),[D]),W=p.useMemo(()=>rt(fe),[fe]),Be=Qe(yt),[I,He,Te]=xe({value:b,defaultValue:x,finalValue:null,onChange:P}),T=typeof I=="string"?W[I]:void 0,U=co(T),[ee,Pt,Ot]=xe({value:O,defaultValue:X,finalValue:T?T.label:"",onChange:me}),V=it({opened:d,defaultOpened:c,onDropdownOpen:()=>{m==null||m(),V.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),V.resetSelectedOption()}}),Z=S=>{Pt(S),V.resetSelectedOption()},{resolvedClassNames:$e,resolvedStyles:Fe}=Ht({props:o,styles:a,classNames:r});p.useEffect(()=>{$&&V.selectFirstOption()},[$,ee]),p.useEffect(()=>{b===null&&Z(""),typeof b=="string"&&T&&((U==null?void 0:U.value)!==T.value||(U==null?void 0:U.label)!==T.label)&&Z(T.label)},[b,T]),p.useEffect(()=>{var S;!Te&&!Ot&&Z(typeof I=="string"&&((S=W[I])==null?void 0:S.label)||"")},[D,I]);const jt=n.jsx(g.ClearButton,{...wt,onClear:()=>{He(null,null),Z(""),be==null||be()}}),Re=vt&&!!I&&!H&&!N;return n.jsxs(n.Fragment,{children:[n.jsxs(g,{store:V,__staticSelector:"Select",classNames:$e,styles:Fe,unstyled:i,readOnly:N,onOptionSubmit:S=>{E==null||E(S);const R=gt&&W[S].value===I?null:W[S],he=R?R.value:null;he!==I&&He(he,R),!Te&&Z(typeof he=="string"&&(R==null?void 0:R.label)||""),V.closeDropdown()},size:Q,...v,children:[n.jsx(g.Target,{targetType:F?"input":"button",autoComplete:Dt,children:n.jsx(Je,{id:Be,ref:t,__defaultRightSection:n.jsx(g.Chevron,{size:Q,error:Ve,unstyled:i,color:At}),__clearSection:jt,__clearable:Re,rightSection:de,rightSectionPointerEvents:xt||(Re?"all":"none"),...Y,size:Q,__staticSelector:"Select",disabled:H,readOnly:N||!F,value:ee,onChange:S=>{Z(S.currentTarget.value),V.openDropdown(),$&&V.selectFirstOption()},onFocus:S=>{F&&V.openDropdown(),u==null||u(S)},onBlur:S=>{var R;F&&V.closeDropdown(),Z(I!=null&&((R=W[I])==null?void 0:R.label)||""),f==null||f(S)},onClick:S=>{F?V.openDropdown():V.toggleDropdown(),y==null||y(S)},classNames:$e,styles:Fe,unstyled:i,pointer:!F,error:Ve})}),n.jsx(Io,{data:fe,hidden:N||H,filter:ne,search:ee,limit:le,hiddenWhenEmpty:!h,withScrollArea:ce,maxDropdownHeight:ie,filterOptions:!!F&&(T==null?void 0:T.label)!==ee,value:I,checkIconPosition:ue,withCheckIcon:pe,nothingFoundMessage:h,unstyled:i,labelId:Y.label?`${Be}-label`:void 0,"aria-label":Y.label?void 0:Y["aria-label"],renderOption:St,scrollAreaProps:Et})]}),n.jsx(g.HiddenInput,{value:I,name:A,form:C,disabled:H,...Ct})]})});Ne.classes={...Je.classes,...g.classes};Ne.displayName="@mantine/core/Select";const Bo=new Map([["bold",w.createElement(w.Fragment,null,w.createElement("path",{d:"M208,76H180V56A52,52,0,0,0,76,56V76H48A20,20,0,0,0,28,96V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V96A20,20,0,0,0,208,76ZM100,56a28,28,0,0,1,56,0V76H100ZM204,204H52V100H204Zm-60-52a16,16,0,1,1-16-16A16,16,0,0,1,144,152Z"}))],["duotone",w.createElement(w.Fragment,null,w.createElement("path",{d:"M216,96V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V96a8,8,0,0,1,8-8H208A8,8,0,0,1,216,96Z",opacity:"0.2"}),w.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-68-56a12,12,0,1,1-12-12A12,12,0,0,1,140,152Z"}))],["fill",w.createElement(w.Fragment,null,w.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80Zm-80,84a12,12,0,1,1,12-12A12,12,0,0,1,128,164Zm32-84H96V56a32,32,0,0,1,64,0Z"}))],["light",w.createElement(w.Fragment,null,w.createElement("path",{d:"M208,82H174V56a46,46,0,0,0-92,0V82H48A14,14,0,0,0,34,96V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V96A14,14,0,0,0,208,82ZM94,56a34,34,0,0,1,68,0V82H94ZM210,208a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V96a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-72-56a10,10,0,1,1-10-10A10,10,0,0,1,138,152Z"}))],["regular",w.createElement(w.Fragment,null,w.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-68-56a12,12,0,1,1-12-12A12,12,0,0,1,140,152Z"}))],["thin",w.createElement(w.Fragment,null,w.createElement("path",{d:"M208,84H172V56a44,44,0,0,0-88,0V84H48A12,12,0,0,0,36,96V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V96A12,12,0,0,0,208,84ZM92,56a36,36,0,0,1,72,0V84H92ZM212,208a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V96a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-76-56a8,8,0,1,1-8-8A8,8,0,0,1,136,152Z"}))]]);var Ho=Object.defineProperty,To=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,Ro=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?Ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Mo=(e,t)=>{for(var o in t||(t={}))Fo.call(t,o)&&Ge(e,o,t[o]);if(qe)for(var o of qe(t))Ro.call(t,o)&&Ge(e,o,t[o]);return e},zo=(e,t)=>To(e,$o(t));const mt=p.forwardRef((e,t)=>w.createElement(Tt,zo(Mo({ref:t},e),{weights:Bo})));mt.displayName="Lock";function Zo(e){var t,o;$t.unit(e)?t=e:{source:t,reset:o}=e;var r=we(!0,{name:"$canTrigger",sid:"ys2jl0"}),a=M({and:[{source:t,filter:r}],or:{name:"trigger",sid:"e3xto3"}});return r.on(a,()=>!1),o&&r.reset(o),a}const Lo=e=>{e.target.value=String(e.target.value).toUpperCase()},qo=({regularPrice:e,promocodePrice:t})=>{const{urlParsed:{search:{type:o}}}=oe();return n.jsxs(Ft,{className:L.wrapper,children:[n.jsx(Rt,{className:L.title,order:2,children:o?"Экспресс-отчёт по вашему типу личности":"Полный отчет по вашему типу личности"}),n.jsx(Mt,{className:L.skeleton,hidden:!!e,radius:"sm"}),n.jsxs(zt,{gap:"lg",children:[n.jsxs(z,{hidden:!e,className:L.price,td:t?"line-through":"",c:t?"dark.0":"dark.7",children:[e," ",n.jsx(z,{className:L.price,span:!0,ff:"system-ui",children:"₽"})]}),n.jsxs(z,{hidden:!t,className:L.price,c:"violet.8",children:[t," ",n.jsx(z,{className:L.price,span:!0,ff:"system-ui",children:"₽"})]})]})]})},re=Lt({and:[],or:{name:"BuyReportGate",sid:"zihff9"}}),Ie=Xe({name:"applyPromocodeClicked",sid:"1wx151"}),se=we("",{name:"$promocodeErrorMessage",sid:"fak484"}).reset(Ie),ae=we(!1,{name:"$showSuccessPromoMessage",sid:"-yp7qwn"}),bt=Xe({},{name:"reportPurchased",sid:"r9kt81"});ae.reset(re.close);se.reset(re.close);M({and:[{clock:re.close,target:K.reset}],or:{sid:"-9fn862"}});const ft=Zt(async e=>{window.open(e,"_self")},{name:"openTransactionPaywallFx",sid:"-d8frxp"});M({and:[{clock:Ie,target:K.start}],or:{sid:"-9ap2tt"}});M({and:[{clock:K.finished.failure,fn:({error:e})=>qt(e)?e.data.message:"",target:se}],or:{sid:"-8wefef"}});M({and:[{clock:K.finished.failure,fn:()=>!1,target:ae}],or:{sid:"-8hjzdo"}});M({and:[{clock:K.finished.success,fn:()=>!0,target:ae}],or:{sid:"-8e97ti"}});M({and:[{clock:bt,target:Ye.start}],or:{sid:"-7zersr"}});M({and:[{source:Gt({sid:"cu1eo3",fn:()=>Zo(Ye.finished.success),name:"source",method:"once"}),fn:({result:e})=>e.confirmation_url,target:ft}],or:{sid:"-7wnsty"}});const Go=()=>{var D;const{urlParsed:{search:{type:e,reportId:t}},routeParams:{surveyId:o}}=oe(),r=q(bt),[a,i]=q([ze.$data,ze.$pending]),{types:s,promocodeError:d,currentUserMbti:c}=q({types:Kt.$personalitiesMap,promocodeError:se,currentUserMbti:et.$userMbtiTypes.map(b=>b.find(x=>x[t])??null)}),l=Wt({mode:"controlled",initialValues:{email:((D=a==null?void 0:a.user)==null?void 0:D.email)??"",mbti_type:t?c==null?void 0:c[t]:e,promo_code:"",user_report:t??""},validate:{email:b=>/^\S+@\S+$/.test(b)?null:"Неправильный email",mbti_type:b=>t||b&&(b==null?void 0:b.replaceAll('"',"").length)>0?null:"Выберите тип личности"}}),m=Object.keys(s).map(b=>({value:b,label:`${s[b]} (${b})`}));p.useEffect(()=>{var b;a&&l.setFieldValue("email",((b=a==null?void 0:a.user)==null?void 0:b.email)??"")},[a]);const u={size:"md",radius:"xs",disabled:!!o||!!t,data:m,name:"mbti_type",withAsterisk:!0,key:l.key("mbti_type"),rightSection:(!!o||!!t)&&n.jsx(mt,{}),label:"Тип личности для отчёта",placeholder:"Выберите из списка",styles:{label:{fontWeight:"bold",marginBottom:4}},...l.getInputProps("mbti_type"),onChange:b=>{l.setFieldValue("mbti_type",b??""),window.history.pushState(null,"",`?type=${b}`)}},f={radius:"xs",name:"email",withAsterisk:!0,key:l.key("email"),label:"Электронная почта",placeholder:"name@mail.ru",...l.getInputProps("email")},y={radius:"xs",name:"promo_code",key:l.key("promo_code"),placeholder:"Введите промокод",...l.getInputProps("promo_code")},P=l.onSubmit(b=>{const x={...b};b.mbti_type||(x.mbti_type=e),t&&delete x.mbti_type,t||delete x.user_report,(!x.promo_code||d)&&delete x.promo_code,r(x)});return p.useEffect(()=>{if(!(o||e)){if(!e)return l.setFieldValue("mbti_type",Object.keys(s)[0]);!i&&!(c!=null&&c[t])&&Ut("/")}},[e,c,t,o,i]),{form:l,onSubmit:P,emailProps:f,promocodeProps:y,selectProps:u}},Ko=()=>{Qt(re);const{pending:e}=q(K),{urlParsed:{search:{reportId:t}}}=oe(),{onSubmit:o,promocodeProps:r,emailProps:a,form:i,selectProps:s}=Go(),{applyPromoHandler:d,promocodeError:c,showSuccessMessage:l,isLoading:m,currentUserMbti:u}=q({applyPromoHandler:Ie,promocodeError:se,showSuccessMessage:ae,isLoading:ft.pending,currentUserMbti:et.$userMbtiTypes.map(f=>f.find(y=>y[t])??null)});return n.jsxs(ro,{onSubmit:o,children:[n.jsx(Ne,{...s,value:t?u==null?void 0:u[t]:s.value}),n.jsx(Jt,{...a}),n.jsxs(Xt,{bg:"gray.0",radius:"xs",p:"md",px:"sm",children:[n.jsx(z,{className:Le.promocodeLabel,children:"У меня есть промокод"}),n.jsxs(Yt,{className:Le.promocodeWrapper,children:[n.jsx(eo,{...r,disabled:e||m,error:c,onInput:Lo,"data-success":l,description:l?"Промокод применен":"",inputWrapperOrder:["label","input","description","error"],size:"md",radius:"sm"}),n.jsx(Ze,{fullWidth:!0,size:"sm",mih:42,variant:"default",loading:e||m,onClick:()=>!e&&d(i.values.promo_code.toUpperCase()),children:"Применить"})]})]}),n.jsx(Ze,{loading:e||m,size:"md",type:"submit",children:"Перейти к оплате"}),n.jsxs(z,{fz:12,ta:"center",mb:12,children:["Нажимая на кнопку, вы подтверждаете свое согласие на сбор, хранение и использование ваших персональных данных согласно"," ",n.jsx(z,{fz:12,c:"blue.7",component:"a",href:"https://storage.yandexcloud.net/cognitive-lab-public/%D0%9F%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0%20%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B4%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8.pdf",children:"Политике конфиденциальности"})," ","и принимаете условия"," ",n.jsx(z,{fz:12,c:"blue.7",component:"a",href:"https://storage.yandexcloud.net/cognitive-lab-public/%D0%94%D0%BE%D0%B3%D0%BE%D0%B2%D0%BE%D1%80%20%D0%BE%D1%84%D0%B5%D1%80%D1%82%D1%8B.pdf",children:"Публичной оферты"})]})]})},cr=()=>{const{data:e,pending:t}=q(tt),{data:o}=q(K),{urlParsed:{search:{type:r}}}=oe();if(!e&&t)return n.jsx(to,{});if(!e)return null;const a=r?e.skip_survey_price:e.regular_price,i=r?o==null?void 0:o.skip_survey_price.final:o==null?void 0:o.regular_price.final;return n.jsxs(ao,{className:no.root,image:"/payment/logo",children:[n.jsx(qo,{regularPrice:a,promocodePrice:i}),n.jsx(Ko,{}),n.jsx(oo,{})]})},ht=lo();M({and:[{clock:ht,target:tt.refresh}],or:{sid:"xy85kd"}});const ir=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:ht},Symbol.toStringTag,{value:"Module"}));export{cr as P,ir as i};
