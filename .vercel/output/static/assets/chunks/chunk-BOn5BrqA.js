import{ao as ke,j as r,aw as ee,B as U,l as Ce,m as Fe,n as Ie,aI as Y,A as G,aB as ze,bs as Ee,p as Be,ax as Ne,aE as Pe,t as Te,Z as W,bg as Ve,$ as qe,a0 as Ae,a1 as te,_ as Ge,ah as Oe,a2 as De,a3 as Ue,a4 as $,a5 as Qe,a6 as We,a7 as Xe,M as h,bz as Ke,bU as Le}from"./chunk-zZ4wVjwK.js";const[Ze,se]=ke("Rating was not found in tree");function ae(t){const{width:a,height:n,style:l,...o}=t;return r.jsx("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:a,height:n,...l},...o,children:r.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})})}ae.displayName="@mantine/core/StarIcon";function Q({type:t}){const a=se();return r.jsx(ae,{...a.getStyles("starSymbol"),"data-filled":t==="full"||void 0})}Q.displayName="@mantine/core/StarSymbol";function oe({getSymbolLabel:t,emptyIcon:a,fullIcon:n,full:l,active:o,value:c,readOnly:m,fractionValue:s,color:p,id:j,onBlur:k,onChange:M,onInputChange:C,style:X,...F}){var u;const v=se(),b=typeof n=="function"?n(c):n,d=typeof a=="function"?a(c):a,{dir:R}=ee();return r.jsxs(r.Fragment,{children:[!m&&r.jsx("input",{...v.getStyles("input"),onKeyDown:w=>w.key===" "&&M(c),id:j,type:"radio","data-active":o||void 0,"aria-label":t==null?void 0:t(c),value:c,onBlur:k,onChange:C,...F}),r.jsx(U,{component:m?"div":"label",...v.getStyles("label"),"data-read-only":m||void 0,htmlFor:j,onClick:()=>M(c),__vars:{"--rating-item-z-index":(u=s===1?void 0:o?2:0)==null?void 0:u.toString()},children:r.jsx(U,{...v.getStyles("symbolBody"),__vars:{"--rating-symbol-clip-path":s===1?void 0:R==="ltr"?`inset(0 ${o?100-s*100:100}% 0 0)`:`inset(0 0 0 ${o?100-s*100:100}% )`},children:l?b||r.jsx(Q,{type:"full"}):d||r.jsx(Q,{type:"empty"})})})]})}oe.displayName="@mantine/core/RatingItem";var ne={root:"m_f8d312f2",symbolGroup:"m_61734bb7",starSymbol:"m_5662a89a",input:"m_211007ba",label:"m_21342ee4",symbolBody:"m_fae05d6a"};function O(t,a){var o;const n=Math.round(t/a)*a,l=((o=`${a}`.split(".")[1])==null?void 0:o.length)||0;return Number(n.toFixed(l))}const He={size:"sm",getSymbolLabel:t=>`${t}`,count:5,fractions:1,color:"yellow"},Je=Be((t,{size:a,color:n})=>({root:{"--rating-size":Te(a,"rating-size"),"--rating-color":Pe(n,t)}})),re=Ce((t,a)=>{const n=Fe("Rating",He,t),{classNames:l,className:o,style:c,styles:m,unstyled:s,vars:p,name:j,id:k,value:M,defaultValue:C,onChange:X,fractions:F,count:v,onMouseEnter:b,readOnly:d,onMouseMove:R,onHover:u,onMouseLeave:w,onTouchStart:I,onTouchEnd:z,size:ie,variant:le,getSymbolLabel:ce,color:Ye,emptySymbol:de,fullSymbol:ue,highlightSelectedOnly:me,...fe}=n,E=Ie({name:"Rating",classes:ne,props:n,className:o,style:c,classNames:l,styles:m,unstyled:s,vars:p,varsResolver:Je}),{dir:he}=ee(),ge=Y(j),K=Y(k),B=G.useRef(null),[ye,N]=ze({value:M,defaultValue:C,finalValue:0,onChange:X}),[x,S]=G.useState(-1),[pe,L]=G.useState(!0),P=Math.floor(F),T=Math.floor(v),g=1/P,Z=O(ye,g),V=x!==-1?x:Z,H=e=>{if(!B.current)return 0;const{left:i,right:f,width:q}=B.current.getBoundingClientRect(),A=q/T,_=(he==="rtl"?f-e:e-i)/A;return Ne(O(_+g/2,g),g,T)},ve=e=>{b==null||b(e),!d&&L(!1)},be=e=>{if(R==null||R(e),d)return;const i=H(e.clientX);S(i),i!==x&&(u==null||u(i))},Re=e=>{w==null||w(e),!d&&(S(-1),L(!0),x!==-1&&(u==null||u(-1)))},we=e=>{const{touches:i}=e;if(i.length===1){if(!d){const f=i[0];N(H(f.clientX))}I==null||I(e)}},xe=e=>{e.preventDefault(),z==null||z(e)},Se=()=>pe&&S(-1),_e=e=>{d||S(typeof e=="number"?e:parseFloat(e.target.value))},je=e=>{d||N(typeof e=="number"?e:parseFloat(e.target.value))},Me=Array(T).fill(0).map((e,i)=>{const f=i+1,q=Array.from(new Array(i===0?P+1:P)),A=!d&&Math.ceil(x)===f;return r.jsx("div",{"data-active":A||void 0,...E("symbolGroup"),children:q.map(($e,_)=>{const J=g*(i===0?_:_+1),y=O(f-1+J,g);return r.jsx(oe,{getSymbolLabel:ce,emptyIcon:de,fullIcon:ue,full:me?y===V:y<=V,active:y===V,checked:y===Z,readOnly:d,fractionValue:J,value:y,name:ge,onChange:je,onBlur:Se,onInputChange:_e,id:`${K}-${i}-${_}`},`${f}-${y}`)})},f)});return r.jsx(Ze,{value:{getStyles:E},children:r.jsx(U,{ref:Ee(B,a),...E("root"),onMouseMove:be,onMouseEnter:ve,onMouseLeave:Re,onTouchStart:we,onTouchEnd:xe,variant:le,size:ie,id:K,...fe,children:Me})})});re.classes=ne;re.displayName="@mantine/core/Rating";W({sid:"-juon18",fn:()=>Ge({effect:Oe(t=>({url:te.surveys.comments,params:t??{}}))}),name:"getReviewsQuery",method:"createQuery"});const D=W({sid:"-sexnrd",fn:()=>Ve({effect:qe(t=>({url:te.surveys.comments,method:Ae.POST,body:t}))}),name:"createReviewMutation",method:"createMutation"}),tt=De(()=>{const t=Ue({and:[],or:{name:"ReviewGate",sid:"-ieiw5b"}}),a=$([],{name:"$allReviews",sid:"-b9etj1"}),n=$(null,{name:"$currentReviewId",sid:"huyue6"}),l=$(!1,{name:"$isFormSubmittedSuccessfully",sid:"4bdvj3"}),o=$(!1,{name:"$hasError",sid:"j366zd"}),c=Qe({name:"reviewCreated",sid:"-sea2qz"}),m=We(({message:s,isError:p})=>{Xe.show({title:p?"Произошла ошибка":"Успешно!",message:s,color:p?"red":"blue"})},{name:"showMessageFx",sid:"sqf3lz"});return h({and:[{clock:c,target:D.start}],or:{sid:"-3cpdb8"}}),h({and:[{clock:D.finished.success,fn:()=>!0,target:l}],or:{sid:"-39yecf"}}),h({and:[{clock:t.close,fn:()=>!1,target:l}],or:{sid:"-2v3ybo"}}),h({and:[{clock:D.finished.failure,fn:({error:s})=>Ke(s)?s.data.message:"Произошла ошибка",target:o}],or:{sid:"-2g9iax"}}),h({and:[{clock:l,filter:s=>s===!0,fn:()=>({message:"Отзыв успешно отправлен!",isError:!1}),target:m}],or:{sid:"-2cyqqr"}}),h({and:[{clock:o,filter:s=>s!==!1,fn:s=>({message:s===!1?"Произошла ошибка":s,isError:!0}),target:m}],or:{sid:"-1vx4ck"}}),h({and:[{clock:W({sid:"-o9m4q0",fn:()=>Le(o,300),name:"clock",method:"delay"}),target:o.reinit}],or:{sid:"-1evhyd"}}),{$allReviews:a,$currentReviewId:n,$isFormSubmittedSuccessfully:l,reviewCreated:c,$hasError:o,ReviewGate:t}});export{re as R,tt as a,D as c};
