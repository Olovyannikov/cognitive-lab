import{w as m,O as p,k as u,A as h,V as j,s as N,j as s,y as f,$ as _,S as b,T as g,B as k,h as z,v as S,F as $,I as x,J as v,t as d,al as w,am as y,ah as B,an as Q,K as C,x as O}from"./chunk-rkyp3PfC.js";import"./chunk-OTlyJmN-.js";import{l as T}from"./chunk-BGtGXBHN.js";import{M as I}from"./chunk-DXLYDXku.js";import{s as r}from"./chunk-9Of7RetC.js";import{G as M}from"./chunk-BiGrEIuX.js";import{C as D}from"./chunk-D9koh-g5.js";import{I as F}from"./chunk-u22d0l8Y.js";const l=m({sid:"8wrxdv",fn:()=>p({initialData:{},effect:u(e=>({url:h.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var o;if(!e.result)return{};const t=(o=e.result)==null?void 0:o.payload.toSorted((c,i)=>Number(i.pinned)-Number(c.pinned));return{...e.result,payload:t}}}),name:"getBlogPostsQuery",method:"createQuery"}),Y=m({sid:"-1szoee",fn:()=>p({initialData:{},effect:u(e=>({url:h.BLOG_POSTS,params:{post_type:"post",page_size:Number(e.page_size),show_on_main:!0,...e}})),mapData:e=>{var o;if(!e.result)return{};const t=(o=e.result)==null?void 0:o.payload.toSorted((c,i)=>Number(i.pinned)-Number(c.pinned));return{...e.result,payload:t}}}),name:"getAllBlogPostsQuery",method:"createQuery"}),H=m({sid:"-ex9xhz",fn:()=>p({effect:u(e=>({url:h.BLOG_POST_BY_ID(e)}))}),name:"getBlogPostByIdQuery",method:"createQuery"});m({sid:"qnk2ue",fn:()=>j(l),name:"none",method:"cache"});const A=N.memo(({post:e})=>s.jsx(M.Col,{span:{base:12,lg:e.pinned?12:4},className:f(e.pinned&&r.pinned),children:s.jsx(D,{h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:s.jsxs(_,{className:f(r.card,e.pinned&&r.row),gap:"md",children:[s.jsx(F,{className:r.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),s.jsxs(b,{className:r.preview,justify:"center",children:[s.jsx(g,{className:r.title,children:e.title}),s.jsx(k,{className:r.text,children:s.jsx(I,{options:{overrides:{h1:t=>s.jsx(g,{order:1,className:r.title,children:t.children}),h2:t=>s.jsx(g,{order:2,className:r.title,children:t.children}),p:t=>s.jsx(z,{className:r.text,children:t.children})}},children:e.body.data})}),s.jsx(S,{variant:"subtle",rightSection:s.jsx(T,{}),className:r.more,children:"Читать"})]})]})})}));A.displayName="BlogPostCard";const U=$(()=>{const e=x(1,{name:"$currentPage",sid:"ytwjf1"}),t=v({name:"pageChanged",sid:"oolbf0"});d({and:[{clock:t,target:e}],or:{sid:"-vsuzyk"}});const o=x(5,{name:"$pageSize",sid:"62nf95"});d({and:[{clock:o,filter:l.$data.map(a=>{var n;return((n=a==null?void 0:a.payload)==null?void 0:n.length)<1}),fn:a=>({page:1,page_size:a}),target:l.refresh}],or:{sid:"-vpk8ee"}}),d({and:[{clock:e,source:{page_size:o},fn:({page_size:a},n)=>({page:n,page_size:a}),target:l.refresh}],or:{sid:"-vapsdn"}}),w({clock:[B.matched,y.matched],source:{isDesktop:B.$matches,isMobile:y.$matches},target:{$currentPage:e,$pageSize:o},fn:(a,{isDesktop:n,isMobile:P})=>{a.$currentPage(1),n&&a.$pageSize(10),P&&a.$pageSize(5)}});const c=Q(l.finished.success.map(a=>a.result.total_pages),1,{name:"$totalPages",sid:"h0dvkf"}),i=C(async()=>{await O("/blog?page=1")},{name:"redirectToMainBlogPostPageFx",sid:"rtgny8"});return d({and:[{clock:l.finished.failure,target:i}],or:{sid:"-tfmvzl"}}),{$currentPage:e,$pageSize:o,pageChanged:t,$totalPages:c,redirectToMainBlogPostPageFx:i}});export{U as B,A as a,H as b,Y as c,l as g};
