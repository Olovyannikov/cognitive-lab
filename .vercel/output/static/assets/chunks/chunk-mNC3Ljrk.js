import{w as g,O as F,k as $,bb as b,bc as p,a1 as v,n as P,p as u,q as y,bm as k,z as s}from"./chunk-FriIlJJ7.js";import"./chunk-jlSp-m47.js";import{i as M}from"./chunk-BkeKN5IP.js";const d=g({sid:"-iugphm",fn:()=>F({effect:$(()=>({url:"/surveys/questions"}))}),name:"getQuestionsQuery",method:"createQuery"}),A=g({sid:"-ee19bn",fn:()=>b({effect:p(n=>({url:"/surveys/answers/submit",method:v.POST,body:n}))}),name:"submitAnswersMutation",method:"createMutation"});var x=Array.isArray;const S=P(()=>{const n=u(1,{name:"$currentPage",sid:"-s56hic"}),m=u(0,{name:"$currentProgress",sid:"h0fyu1"}),f=u(null,{name:"$currentQuestion",sid:"-o1cf4x"}),l=u(null,{name:"$currentValue",sid:"-ohk8g0"}),t=u({answers:[]},{name:"$scaleForm",sid:"s2t2er"}),i=y({name:"scaleFormFieldChanged",sid:"c5ohrw"}),c=y({name:"formPageChanged",sid:"-1iwvab"}),w=g({sid:"-hffixs",fn:()=>k(i,250),name:"delayedFormFieldChanged",method:"delay"});return s({and:[{clock:[n,d.$data],source:{page:n,questions:d.$data},fn:({page:e,questions:r})=>r?r[e-1]:null,target:f}],or:{sid:"sirj1h"}}),s({and:[{clock:i,source:t,fn:(e,r)=>(e.answers[r.index]=r,{...e}),target:t}],or:{sid:"t1gj7r"}}),s({and:[{clock:w,source:n,filter:(e,r)=>!(r.isMultiple||r.isSingle),fn:e=>e+1,target:c}],or:{sid:"tii5ly"}}),s({and:[{clock:i,source:{form:t,page:n},filter:(e,r)=>!(r.isMultiple||r.isSingle),fn:({form:e,page:r})=>{const o=r-1;return e.answers&&e.answers.length>0&&"value"in e.answers[o].answer&&e.answers[o].answer.value?e.answers[o].answer.value:null},target:l}],or:{sid:"tyg6tf"}}),s({and:[{clock:[t,c],source:{form:t,page:n},fn:({form:{answers:e},page:r},o)=>{var h;const a=(M(o)?o:r)-1;return(h=e[a])!=null&&h.answer?e&&e[a].answer&&x(e[a].answer)||e&&e.length>0&&e[a].isSingle?e[a].answer:e&&e.length>0&&"value"in e[a].answer?e[a].answer.value:null:null},target:l}],or:{sid:"uvzn0g"}}),s({and:[{clock:c,fn:e=>(window.scrollTo(0,0),e),target:n}],or:{sid:"eu8c17"}}),s({and:[{clock:t,source:{questions:d.$data,form:t},fn:({questions:e,form:{answers:r}})=>Number((r.length/((e==null?void 0:e.length)??0)*100).toFixed(0)),target:m}],or:{sid:"faq5u1"}}),{$currentPage:n,$currentProgress:m,$currentQuestion:f,$currentValue:l,$scaleForm:t,scaleFormFieldChanged:i,formPageChanged:c}});export{S as T,d as g,x as i,A as s};
