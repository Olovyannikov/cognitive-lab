import{j as a,k as _,T as f,W as d,X as h,ae as x,_ as y,ai as k,$ as w,a1 as B,aj as u,a2 as v,a3 as b,M as p,ak as P,x as z,a8 as N,F as $,I as q,S as C}from"./chunk-hUhEBj1W.js";import"./chunk-CfcgHmQg.js";import{M}from"./chunk-v56aQnRN.js";import{s as g}from"./chunk-CAqCnvYx.js";import{B as T}from"./chunk-DKvQOWgd.js";import{s as i}from"./chunk-BPb3rbqd.js";import{G as D}from"./chunk-BQ8WuXUh.js";import{C as F}from"./chunk-uUmKgEWL.js";const S=({children:e})=>a.jsx(M,{className:g.mkd,options:{overrides:{h1:s=>a.jsx(f,{order:1,className:g.title,children:s.children}),h2:s=>a.jsx(f,{order:2,className:g.title,children:s.children}),p:s=>a.jsx(_,{className:g.text,children:s.children}),blockquote:s=>a.jsx(T,{mb:"md",py:"sm",px:"md",color:"violet.9",bg:"transparent",icon:null,children:s.children}),a:s=>a.jsx(a.Fragment,{children:s.children})}},children:e}),n=d({sid:"9tr3t5go",fn:()=>h({initialData:{},effect:x(e=>({url:y.blog.posts,params:{post_type:"post",page_size:Number(e.page_size),...e}})),mapData:e=>{var o,r;if(!e.result)return{};const s=(r=(o=e.result)==null?void 0:o.payload)==null?void 0:r.toSorted((l,c)=>Number(c.pinned)-Number(l.pinned));return{...e.result,payload:s}}})}),V=d({sid:"184vyyna",fn:()=>h({initialData:{},effect:x(e=>({url:y.blog.posts,params:{post_type:"post",page_size:Number(e.page_size),show_on_main:!0,...e}})),mapData:e=>{var o;if(!e.result)return{};const s=(o=e.result)==null?void 0:o.payload.toSorted((r,l)=>Number(l.pinned)-Number(r.pinned)).map(r=>({...r,updated_at:new Date(r.updated_at).toLocaleDateString("ru-RU")}));return{...e.result,payload:s}}})}),W=d({sid:"2cq9rjig",fn:()=>h({effect:x(e=>({url:y.blog.postById(e)}))})});d({sid:"6ngi5umw",fn:()=>k(n)});const X=d({sid:"5wlqazdd",fn:()=>w(()=>{const e=B(5,{sid:"ehf31n8"}),s=u(n.finished.success.map(({result:t})=>(t==null?void 0:t.payload)??[]),[],{sid:"6fdvqley"}),o=u(n.finished.success.map(({result:t})=>t.total_pages),0,{sid:"7zs4vcxk"}),r=v({sid:"1gi6ft8c"}),l=u(r,1,{sid:"1uf1cnjm"}),c=b(()=>window.scrollTo(0,0),{sid:"3ievvsaw"});p({and:[{clock:r,target:c}],or:{sid:"68xgqtoo"}}),p({and:[{clock:e,filter:n.$data.map(t=>{var m;return((m=t==null?void 0:t.payload)==null?void 0:m.length)<1}),fn:t=>({page:1,page_size:t}),target:n.refresh}],or:{sid:"4m2m2j8e"}}),p({and:[{clock:l,source:{page_size:e},fn:({page_size:t},m)=>({page:m,page_size:t}),target:n.refresh}],or:{sid:"8psz0lie"}});const j=b(async()=>{await P("/blog")},{sid:"4pa7qckd"});return p({and:[{clock:n.finished.failure,target:j}],or:{sid:"5gmsvr1m"}}),{$pageSize:e,$blogPosts:s,pageChanged:r,$totalPages:o,$currentPage:l,scrollToTopFx:c,redirectToMainBlogPostPageFx:j}})}),I=z.memo(({post:e})=>a.jsx(D.Col,{span:{base:12,lg:e.pinned?12:4},className:N(e.pinned&&i.pinned),children:a.jsx(F,{className:i.cardMain,h:"100%",withBorder:!0,component:"a",href:`/blog/${e.id}`,children:a.jsxs($,{className:N(i.card,e.pinned&&i.row),gap:"md",children:[a.jsx(q,{className:i.image,fit:"cover",radius:"xs",src:e.thumbnail_image,alt:e.title}),a.jsxs(C,{className:i.preview,justify:"center",children:[a.jsx(f,{className:i.title,children:e.title}),a.jsx(S,{children:e.body.data})]})]})})}));I.displayName="BlogPostCard";export{X as B,I as a,W as b,V as c,n as g};
