import{W as m,bd as p,Y as b,Z as f,_ as h,$ as g,a2 as j,a3 as v,a4 as k,M as r,be as F,bf as S,x as w,e as n,u as T,a6 as I,j as a,F as R,h as E,bg as P,aG as z,A as B,V as M,bh as N}from"./chunk-jwkHyPqB.js";import{d as _}from"./chunk-bKQMBEkt.js";import{I as L}from"./chunk-NwYMz2pi.js";import{s as l}from"./chunk-Cwmt49qL.js";const i=m({sid:"91c3v7tp",fn:()=>p({effect:b(({user_report_id:e,...o})=>({url:h.surveys.email(e),method:f.POST,body:o}))})}),O=m({sid:"vr1rhjg",fn:()=>g(()=>{const e=j({sid:"973284qs"}),o=v(s=>{k.show({title:"Отчет отправлен!",message:`Отчет отправлен на почту ${s}`})},{sid:"3918vd47"});return r({and:[{clock:e,target:i.start}],or:{sid:"drnskfxl"}}),r({and:[{clock:i.finished.success,filter:({params:s})=>!!s.email,fn:({params:{email:s}})=>s,target:o}],or:{sid:"5iuedrvp"}}),{submitForm:e}})}),q=F({email:S().min(1,{message:"Обязательное поле"}).email("Введите почту в формате example@mail.org")}),W=({type:e="text"})=>{const o=w(),{pending:s}=n(i),[d]=n([O.submitForm]),{routeParams:{reportId:c}}=T(),t=I({mode:"controlled",initialValues:{email:"",user_report_id:c??""},validate:N(q)}),u=t.onSubmit(x=>{d(x)});return a.jsx(L,{className:e==="block"?l.container:"",children:a.jsx("form",{onSubmit:u,children:a.jsxs(R,{className:l.wrapper,children:[e==="text"&&a.jsx(E,{fw:"bold",visibleFrom:"md",fz:24,children:"Отправьте отчет на почту"}),a.jsx(P,{active:!!t.errors.email,children:a.jsx(z,{inputMode:"email",disabled:s,placeholder:"name@mail.ru",miw:o?380:"100%",ml:e==="text"?"auto":0,size:e==="block"?"lg":"md",bg:e==="block"?"violet.0":"white",...t.getInputProps("email")},t.key("email"))}),a.jsx(B,{type:"submit",loading:s,fullWidth:!o,disabled:s,size:e==="block"?"lg":"md",leftSection:a.jsx(_,{size:20}),variant:e==="block"?void 0:"default",c:e==="block"&&!s?"white":"dark.7",px:"md",children:o?"Отправить":"Отправить отчет на почту"}),a.jsx(M,{px:"md",children:"Купить полный отчёт"})]})})})};export{W as S};
