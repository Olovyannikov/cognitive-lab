import{a5 as O,a6 as B,aA as V,ab as H,ae as W,j as e,aB as q,B as T,aC as G,aD as A,aj as Q,T as X,h as l,w as z,aE as Z,aF as Y,W as J,A as L,O as K,k as ee,n as D,X as ae,q as te,p as S,v as re,Y as se,z as p,aG as ie,aH as m,u as oe,e as b,Z as ne,aI as le,S as f,au as de,M as ce,ao as M,i as me,a as pe,b as ue,R as fe,c as xe,d as he,o as ge}from"../chunks/chunk-Bju22xIB.js";import"../chunks/chunk-C1OCJHjt.js";import{P as ve}from"../chunks/chunk-DHWMjVaq.js";import{s as h}from"../chunks/chunk-CWHWgX45.js";import{P as ye}from"../chunks/chunk-B_tId_gb.js";import{i as Se}from"../chunks/chunk-DsWTEMC-.js";import{s as y}from"../chunks/chunk-DbJyLhLd.js";import{T as Pe,N as Te}from"../chunks/chunk-CqAnK3Fd.js";import{R as g}from"../chunks/chunk-CFwr575M.js";import{N as be}from"../chunks/chunk-Q97UECUM.js";import{I as je}from"../chunks/chunk-DJ_FOq9c.js";/* empty css                      */import"../chunks/chunk-CzcYWzuz.js";import"../chunks/chunk-A2AluIPU.js";import"../chunks/chunk-DBQ3R7cM.js";import"../chunks/chunk-DtLa94aX.js";import"../chunks/chunk-D70cBfnA.js";import"../chunks/chunk-fdyRSynD.js";import"../chunks/chunk-SsiTcO1f.js";import"../chunks/chunk-CcRi4BOb.js";import"../chunks/chunk-BaJ2QHzz.js";import"../chunks/chunk-q2zwU3_c.js";import"../chunks/chunk-CSac1xwH.js";import"../chunks/chunk-DX_2ZBoS.js";import"../chunks/chunk-3B-y_MHH.js";import"../chunks/chunk-nbfp0LXO.js";import"../chunks/chunk-DpB2_Uei.js";import"../chunks/chunk-D3EFvA6Y.js";import"../chunks/chunk-rkAEyc-z.js";/* empty css                      */import"../chunks/chunk-CBehke_6.js";import"../chunks/chunk-CPM-DByq.js";import"../chunks/chunk-BxV6bIA7.js";import"../chunks/chunk-C3e4t58V.js";import"../chunks/chunk-CSDg_bIw.js";import"../chunks/chunk-CGG52H9N.js";import"../chunks/chunk-BKZx_Lqz.js";var N={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const C={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:V("overlay")},we=Q((r,{zIndex:o})=>({root:{"--lo-z-index":o==null?void 0:o.toString()}})),k=O((r,o)=>{const t=B("LoadingOverlay",C,r),{classNames:s,className:a,style:d,styles:i,unstyled:n,vars:x,transitionProps:u,loaderProps:j,overlayProps:c,visible:w,zIndex:E,...$}=t,I=H(),v=W({name:"LoadingOverlay",classes:N,props:t,className:a,style:d,classNames:s,styles:i,unstyled:n,vars:x,varsResolver:we}),U={...C.overlayProps,...c};return e.jsx(q,{transition:"fade",...u,mounted:!!w,children:F=>e.jsxs(T,{...v("root",{style:F}),ref:o,...$,children:[e.jsx(G,{...v("loader"),unstyled:n,...j}),e.jsx(A,{...U,...v("overlay"),darkHidden:!0,unstyled:n,color:(c==null?void 0:c.color)||I.white}),e.jsx(A,{...U,...v("overlay"),lightHidden:!0,unstyled:n,color:(c==null?void 0:c.color)||I.colors.dark[5]})]})})});k.classes=N;k.displayName="@mantine/core/LoadingOverlay";const R={title:"Спасибо за ваш отзыв!",description:"Спасибо за ваш отзыв!",image:"/images/success-base-man.webp"},Re=({title:r=R.title,description:o=R.description,image:t=R.image,slots:s})=>e.jsxs(T,{className:h.box,children:[e.jsx(ye,{className:h.image,w:145,"aria-hidden":!0,src:t,alt:r}),e.jsx(X,{className:h.title,order:3,children:r}),e.jsx(l,{className:h.text,children:o}),e.jsx(T,{className:h.action,children:s==null?void 0:s.action})]});z({sid:"-kbq9ff",fn:()=>K({effect:ee(r=>({url:L.REVIEWS_LIST,params:r}))}),name:"getReviewsQuery",method:"createQuery"});const P=z({sid:"-svza5k",fn:()=>Z({effect:Y(r=>({url:L.REVIEWS_LIST,method:J.POST,body:r}))}),name:"createReviewMutation",method:"createMutation"}),_=D(()=>{const r=ae({and:[],or:{name:"ReviewGate",sid:"-yz3ny4"}}),o=te({name:"reviewCreated",sid:"da1es3"}),t=S(!1,{name:"$isFormSubmittedSuccessfully",sid:"-n587c7"}),s=S(!1,{name:"$hasError",sid:"-8dfvvx"}),a=S(null,{name:"$currentReviewId",sid:"-86idaj"}),d=re(({message:i,isError:n})=>{se.show({title:n?"Произошла ошибка":"Успешно!",message:i,color:n?"red":"blue"})},{name:"showMessageFx",sid:"sreci"});return p({and:[{clock:o,target:P.start}],or:{sid:"-4958bj"}}),p({and:[{clock:P.finished.success,fn:()=>!0,target:t}],or:{sid:"-3uukw5"}}),p({and:[{clock:r.close,fn:()=>!1,target:t}],or:{sid:"-3rjtbz"}}),p({and:[{clock:P.finished.failure,fn:({error:i})=>Se(i)?i.data.message:"Произошла ошибка",target:s}],or:{sid:"-3cpdb8"}}),p({and:[{clock:t,filter:i=>i===!0,fn:()=>({message:"Отзыв успешно отправлен!",isError:!1}),target:d}],or:{sid:"-2xuxah"}}),p({and:[{clock:s,filter:i=>i!==!1,fn:i=>({message:i===!1?"Произошла ошибка":i,isError:!0}),target:d}],or:{sid:"-2gtawa"}}),p({and:[{clock:z({sid:"srsa9q",fn:()=>ie(s,300),name:"clock",method:"delay"}),target:s.reinit}],or:{sid:"-1zroi3"}}),{reviewCreated:o,$isFormSubmittedSuccessfully:t,ReviewGate:r,$currentReviewId:a}}),_e=m.object({name:m.string().min(1,{message:"Имя обязательно"}),text:m.string().min(1,{message:"Текст отзыва обязателен"}),informativeness_rate:m.number().min(1,{message:"Поле обязательно"}),convenience_rate:m.number().min(1,{message:"Поле обязательно"}),accuracy_rate:m.number().min(1,{message:"Поле обязательно"}),recommendability_rate:m.number().min(1,{message:"Поле обязательно"}),satisfaction_rate:m.number().min(1,{message:"Поле обязательно"})}),ze=()=>{const{routeParams:{userReport:r}}=oe(),[o,t]=b([_.reviewCreated,_.$isFormSubmittedSuccessfully]),s=b(P.$pending),a=ne({mode:"controlled",initialValues:{name:"",text:"",user_report:r??"",informativeness_rate:0,convenience_rate:0,accuracy_rate:0,recommendability_rate:0,satisfaction_rate:0},validate:le(_e)}),d={name:"name",key:a.key("name"),label:"Имя",placeholder:"Как к вам обращаться?",...a.getInputProps("name")},i={name:"text",key:a.key("text"),label:"Ваш отзыв",placeholder:"Опишите ваш опыт прохождения теста",...a.getInputProps("text")},n={name:"informativeness_rate",key:a.key("informativeness_rate"),label:"Полнота информации",...a.getInputProps("informativeness_rate")},x={name:"convenience_rate",key:a.key("convenience_rate"),label:"Удобство прохождения",...a.getInputProps("convenience_rate")},u={name:"accuracy_rate",key:a.key("accuracy_rate"),label:"Точность результатов",...a.getInputProps("accuracy_rate")},j={name:"recommendability_rate",key:a.key("recommendability_rate"),label:"Готовность рекомендовать друзьям",...a.getInputProps("recommendability_rate")},c={name:"satisfaction_rate",key:a.key("satisfaction_rate"),label:"Удовлетворенность результатом",...a.getInputProps("satisfaction_rate")},w=a.onSubmit(E=>{o(E),t&&a.reset()});return{nameInputProps:d,textInputProps:i,informativenessRateRatingProps:n,convenienceRateProps:x,accuracyRateProps:u,recommendabilityRateProps:j,satisfactionRateProps:c,onSubmit:w,isLoading:s}},ke=({slots:r})=>{const{nameInputProps:o,textInputProps:t,informativenessRateRatingProps:s,satisfactionRateProps:a,convenienceRateProps:d,accuracyRateProps:i,recommendabilityRateProps:n,onSubmit:x,isLoading:u}=ze();return e.jsxs(e.Fragment,{children:[e.jsx(k,{visible:u,overlayProps:{radius:"sm",blur:2}}),e.jsxs("form",{onSubmit:x,children:[e.jsxs(f,{className:y.stack,children:[e.jsx(de,{radius:"xs",size:"md",classNames:y,...o}),e.jsx(Pe,{rows:4,radius:"xs",size:"md",classNames:y,...t,mb:"md"}),e.jsxs(f,{gap:"3xl",children:[e.jsxs(f,{gap:"xxs",children:[e.jsx(l,{fw:"bold",children:s.label}),e.jsx(g,{size:"xl",...s}),s.error&&e.jsx(l,{fz:14,c:"red",children:"Поле обязательно"})]}),e.jsxs(f,{gap:"xxs",children:[e.jsx(l,{fw:"bold",children:d.label}),e.jsx(g,{size:"xl",...d}),d.error&&e.jsx(l,{fz:14,c:"red",children:"Поле обязательно"})]}),e.jsxs(f,{gap:"xxs",children:[e.jsx(l,{fw:"bold",children:i.label}),e.jsx(g,{size:"xl",...i}),i.error&&e.jsx(l,{fz:14,c:"red",children:"Поле обязательно"})]}),e.jsxs(f,{gap:"xxs",children:[e.jsx(l,{fw:"bold",children:n.label}),e.jsx(g,{size:"xl",...n}),n.error&&e.jsx(l,{fz:14,c:"red",children:"Поле обязательно"})]}),e.jsxs(f,{gap:"xxs",children:[e.jsx(l,{fw:"bold",children:a.label}),e.jsx(g,{size:"xl",...a}),a.error&&e.jsx(l,{fz:14,c:"red",children:"Поле обязательно"})]})]})]}),e.jsxs(T,{className:y.controls,children:[e.jsx(ce,{disabled:u,loading:u,type:"submit",children:"Отправить"}),r==null?void 0:r.action]})]})]})},Ee=D(()=>{const r=S(!1,{name:"$isSubmitted",sid:"9uinjp"}),o=M.$data.map(t=>t==null?void 0:t.left_comments);return p({and:[{clock:o,source:_.$currentReviewId,fn:(t,s)=>!!(s!=null&&s.find(({user_report:a})=>a===t)),target:r}],or:{sid:"xnhzlm"}}),{$isSubmitted:r}}),Ie=()=>{const{pending:r,stale:o}=b(M),[t]=b([Ee.$isSubmitted]);return r||o?e.jsx(ve,{}):e.jsxs(je,{title:!t&&"Оставьте отзыв",text:!t&&"Поделитесь вашим мнением о прохождении теста. Будем рады услышать вас!",image:t?void 0:"/review/question-bubble",children:[!t&&e.jsx(ke,{slots:{action:e.jsx(be,{})}}),t&&e.jsx(Re,{description:"Благодарим вас за то, что поделились своим мнением! Мы высоко ценим любую обратную связь и стараемся использовать её для улучшения нашего сервиса.",image:"/review/star",slots:{action:e.jsx(Te,{fullWidth:!0})}})]})};function Ue(){return e.jsx(Ie,{})}const Ae=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),ga={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:ge}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:he}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:xe}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/review/@userReport/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ae}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/widgets/RootLayout/index.tsx",fileExportPathToShowToUser:["RootLayout"]}],valueSerialized:[{type:"pointer-import",value:fe}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Cognitive Lab"}},lang:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","lang"]},valueSerialized:{type:"js-serialized",value:"ru"}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/pages/+onBeforeRenderClient.ts",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:ue}]},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:pe}]},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:me}}};export{ga as configValuesSerialized};
